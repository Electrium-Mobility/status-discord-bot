# Outline åŒæ­¥åŠŸèƒ½ä½¿ç”¨æŒ‡å—

## æ¦‚è¿°

è¿™ä¸ªåŠŸèƒ½å…è®¸ä½ è‡ªåŠ¨å°† Discord è§’è‰²åŒæ­¥åˆ° Outline ç¾¤ç»„ï¼ŒåŸºäºé¢„å®šä¹‰çš„æ˜ å°„å…³ç³»ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ”„ è‡ªåŠ¨åŒæ­¥ Discord è§’è‰²æˆå‘˜åˆ° Outline ç¾¤ç»„
- ğŸ†• è‡ªåŠ¨åˆ›å»ºç¼ºå¤±çš„ Outline ç¾¤ç»„
- ğŸ“‹ æ”¯æŒçµæ´»çš„è§’è‰²æ˜ å°„é…ç½®
- ğŸ”§ æ”¯æŒåŠ¨æ€é‡æ–°åŠ è½½é…ç½®
- ğŸ“Š æä¾›è¯¦ç»†çš„åŒæ­¥æŠ¥å‘Š

## è§’è‰²æ˜ å°„é…ç½®

### F25 é¡¹ç›®ç»„

| Discord è§’è‰²          | Outline ç¾¤ç»„               | æè¿°                   |
| --------------------- | -------------------------- | ---------------------- |
| `Bike-F25`            | `F25-Bike-Team`            | F25 è‡ªè¡Œè½¦é¡¹ç›®å›¢é˜Ÿ     |
| `Skateboard-F25`      | `F25-Skateboard-Team`      | F25 æ»‘æ¿é¡¹ç›®å›¢é˜Ÿ       |
| `MidBike-F25`         | `F25-MidBike-Team`         | F25 ä¸­å‹è‡ªè¡Œè½¦é¡¹ç›®å›¢é˜Ÿ |
| `F25-FW-ELEC-Project` | `F25-Firmware-Electronics` | F25 å›ºä»¶ç”µå­é¡¹ç›®å›¢é˜Ÿ   |

### é¢†å¯¼å±‚è§’è‰²

| Discord è§’è‰²   | Outline ç¾¤ç»„    | æè¿°       |
| -------------- | --------------- | ---------- |
| `team lead`    | `Team-Leads`    | å›¢é˜Ÿè´Ÿè´£äºº |
| `project lead` | `Project-Leads` | é¡¹ç›®è´Ÿè´£äºº |
| `management`   | `Management`    | ç®¡ç†å±‚     |

### éƒ¨é—¨è§’è‰²

| Discord è§’è‰² | Outline ç¾¤ç»„     | æè¿°   |
| ------------ | ---------------- | ------ |
| `Marketing`  | `Marketing-Team` | å¸‚åœºéƒ¨ |
| `coop`       | `Coops-Interns`  | å®ä¹ ç”Ÿ |

## ğŸ® å¯ç”¨å‘½ä»¤

### 1. æµ‹è¯•åŠŸèƒ½

**å‘½ä»¤**: `/test-outline-features`

- **æè¿°**: ç»¼åˆæµ‹è¯• Outline åŠŸèƒ½ï¼ˆé…ç½®éªŒè¯ + æ¨¡æ‹Ÿè¿è¡Œï¼‰
- **æƒé™**: éœ€è¦ç®¡ç†è§’è‰²æƒé™
- **å®‰å…¨æ€§**: 100%å®‰å…¨ï¼Œä¸æ‰§è¡Œå®é™…æ“ä½œ
- **åŠŸèƒ½**:
  - éªŒè¯æ‰€æœ‰ Discord è§’è‰²æ˜ å°„çš„æœ‰æ•ˆæ€§
  - æ¨¡æ‹ŸåŒæ­¥æ“ä½œå¹¶æ˜¾ç¤ºè¯¦ç»†æŠ¥å‘Š
  - æ£€æŸ¥é…ç½®æ–‡ä»¶è¯­æ³•å’Œè®¾ç½®

### 2. æ­£å¼åŒæ­¥

**å‘½ä»¤**: `/sync-outline [dry_run:True/False]`

- **æè¿°**: åŒæ­¥ Discord è§’è‰²åˆ° Outline ç¾¤ç»„
- **æƒé™**: éœ€è¦ç®¡ç†è§’è‰²æƒé™
- **å‚æ•°**:
  - `dry_run`: å¯é€‰ï¼Œè®¾ä¸º True æ—¶è¿›è¡Œæ¨¡æ‹Ÿè¿è¡Œ
- **åŠŸèƒ½**:
  - åˆ›å»ºå¯¹åº”çš„ Outline ç¾¤ç»„
  - åŒæ­¥è§’è‰²æˆå‘˜åˆ°ç¾¤ç»„
  - æ”¯æŒæ¨¡æ‹Ÿè¿è¡Œæ¨¡å¼

### 3. æ˜¾ç¤ºæ˜ å°„

**å‘½ä»¤**: `/show-role-mappings`

- **æè¿°**: æ˜¾ç¤ºå½“å‰çš„ Discord è§’è‰²åˆ° Outline ç¾¤ç»„æ˜ å°„é…ç½®
- **æƒé™**: éœ€è¦ç®¡ç†è§’è‰²æƒé™
- **åŠŸèƒ½**:
  - å±•ç¤ºæ‰€æœ‰é…ç½®çš„è§’è‰²æ˜ å°„
  - æ˜¾ç¤ºæ˜ å°„ç»Ÿè®¡ä¿¡æ¯
  - æŸ¥çœ‹å½“å‰é…ç½®çŠ¶æ€

### 4. é‡è½½é…ç½®

**å‘½ä»¤**: `/reload-mappings`

- **æè¿°**: ä»é…ç½®æ–‡ä»¶é‡æ–°åŠ è½½è§’è‰²æ˜ å°„
- **æƒé™**: éœ€è¦ç®¡ç†è§’è‰²æƒé™
- **åŠŸèƒ½**:
  - é‡æ–°è¯»å– role_mapping.json æ–‡ä»¶
  - æ›´æ–°å†…å­˜ä¸­çš„æ˜ å°„é…ç½®
  - æ— éœ€é‡å¯ Bot å³å¯åº”ç”¨æ–°é…ç½®

## é…ç½®æ–‡ä»¶è¯´æ˜

### role_mapping.json ç»“æ„

```json
{
  "f25_projects": {
    "pattern": "f25",
    "mappings": {
      "Bike-F25": "F25-Bike-Team",
      "Skateboard-F25": "F25-Skateboard-Team",
      "MidBike-F25": "F25-MidBike-Team",
      "F25-FW-ELEC-Project": "F25-Firmware-Electronics"
    }
  },
  "leadership": {
    "team lead": "Team-Leads",
    "project lead": "Project-Leads",
    "management": "Management"
  },
  "departments": {
    "Marketing": "Marketing-Team",
    "coop": "Coops-Interns"
  },
  "outline_settings": {
    "auto_create_groups": true,
    "sync_members": true,
    "sync_interval_hours": 24
  }
}
```

### é…ç½®å‚æ•°è¯´æ˜

- `f25_projects.pattern`: F25 é¡¹ç›®çš„åŒ¹é…æ¨¡å¼
- `f25_projects.mappings`: F25 é¡¹ç›®çš„å…·ä½“æ˜ å°„å…³ç³»
- `leadership`: é¢†å¯¼å±‚è§’è‰²æ˜ å°„
- `departments`: éƒ¨é—¨è§’è‰²æ˜ å°„
- `outline_settings.auto_create_groups`: æ˜¯å¦è‡ªåŠ¨åˆ›å»ºç¾¤ç»„
- `outline_settings.sync_members`: æ˜¯å¦åŒæ­¥æˆå‘˜
- `outline_settings.sync_interval_hours`: åŒæ­¥é—´éš”ï¼ˆå°æ—¶ï¼‰

## ğŸ“‹ ä½¿ç”¨æµç¨‹

### å¿«é€Ÿå¼€å§‹

1. **æµ‹è¯•é…ç½®**: è¿è¡Œ `/test-outline-features` éªŒè¯æ‰€æœ‰è®¾ç½®
2. **æ­£å¼åŒæ­¥**: è¿è¡Œ `/sync-outline` æ‰§è¡ŒåŒæ­¥æ“ä½œ
3. **æŸ¥çœ‹ç»“æœ**: æ£€æŸ¥ Outline ä¸­çš„ç¾¤ç»„å’Œæˆå‘˜

### è¯¦ç»†æµç¨‹

#### ç¬¬ä¸€æ­¥ï¼šéªŒè¯é…ç½®

```bash
/test-outline-features
```

- æ£€æŸ¥æ‰€æœ‰ Discord è§’è‰²æ˜¯å¦å­˜åœ¨
- éªŒè¯é…ç½®æ–‡ä»¶è¯­æ³•
- æ¨¡æ‹ŸåŒæ­¥æ“ä½œ
- æŸ¥çœ‹è¯¦ç»†æŠ¥å‘Š

#### ç¬¬äºŒæ­¥ï¼šæ‰§è¡ŒåŒæ­¥

å¦‚æœæµ‹è¯•é€šè¿‡ï¼Œæ‰§è¡Œæ­£å¼åŒæ­¥ï¼š

```bash
/sync-outline
```

æˆ–è€…å…ˆè¿›è¡Œæ¨¡æ‹Ÿè¿è¡Œï¼š

```bash
/sync-outline dry_run:True
```

#### ç¬¬ä¸‰æ­¥ï¼šéªŒè¯ç»“æœ

- ç™»å½• Outline æ£€æŸ¥ç¾¤ç»„æ˜¯å¦åˆ›å»ºæˆåŠŸ
- éªŒè¯æˆå‘˜æ˜¯å¦æ­£ç¡®åŒæ­¥
- æ£€æŸ¥æƒé™è®¾ç½®æ˜¯å¦æ­£ç¡®

### æ—¥å¸¸ä½¿ç”¨

1. å½“ Discord è§’è‰²æˆå‘˜å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè¿è¡Œ`/sync-outline`
2. å¦‚éœ€ä¿®æ”¹æ˜ å°„å…³ç³»ï¼Œç¼–è¾‘`role_mapping.json`åè¿è¡Œ`/reload-mappings`
3. ä½¿ç”¨`/show-role-mappings`éšæ—¶æŸ¥çœ‹å½“å‰é…ç½®

### æ•…éšœæ’é™¤

1. **åŒæ­¥å¤±è´¥**: æ£€æŸ¥ Outline API token æ˜¯å¦æœ‰æ•ˆ
2. **ç¾¤ç»„åˆ›å»ºå¤±è´¥**: ç¡®è®¤ API æƒé™æ˜¯å¦è¶³å¤Ÿ
3. **æ˜ å°„ä¸ç”Ÿæ•ˆ**: è¿è¡Œ`/reload-mappings`é‡æ–°åŠ è½½é…ç½®

## æ³¨æ„äº‹é¡¹

### æƒé™è¦æ±‚

- Discord: éœ€è¦`manage_roles`æƒé™
- Outline: éœ€è¦æœ‰åˆ›å»ºç¾¤ç»„å’Œç®¡ç†æˆå‘˜çš„ API æƒé™

### å®‰å…¨è€ƒè™‘

- å®šæœŸæ£€æŸ¥åŒæ­¥ç»“æœ
- ç¡®ä¿æ•æ„Ÿç¾¤ç»„ä¸åœ¨è‡ªåŠ¨åŒæ­¥èŒƒå›´å†…
- ä¿æŠ¤å¥½ Outline API token

### æ€§èƒ½ä¼˜åŒ–

- é¿å…é¢‘ç¹æ‰§è¡ŒåŒæ­¥å‘½ä»¤
- å¤§é‡æˆå‘˜åŒæ­¥æ—¶å¯èƒ½éœ€è¦ç­‰å¾…è¾ƒé•¿æ—¶é—´
- å»ºè®®åœ¨ä½å³°æœŸæ‰§è¡Œå¤§è§„æ¨¡åŒæ­¥

## æŠ€æœ¯å®ç°

### æ ¸å¿ƒæ–‡ä»¶

- `bot.py`: ä¸»è¦çš„ Discord bot é€»è¾‘
- `auto_sync_outline.py`: Outline åŒæ­¥åŠŸèƒ½å®ç°
- `role_mapping.json`: è§’è‰²æ˜ å°„é…ç½®æ–‡ä»¶

### API é›†æˆ

- Discord API: è·å–è§’è‰²å’Œæˆå‘˜ä¿¡æ¯
- Outline API: åˆ›å»ºç¾¤ç»„å’Œç®¡ç†æˆå‘˜
- å¼‚æ­¥å¤„ç†: æé«˜åŒæ­¥æ•ˆç‡

### é”™è¯¯å¤„ç†

- API è°ƒç”¨å¤±è´¥é‡è¯•æœºåˆ¶
- è¯¦ç»†çš„é”™è¯¯æ—¥å¿—è®°å½•
- ç”¨æˆ·å‹å¥½çš„é”™è¯¯æ¶ˆæ¯

## æ›´æ–°æ—¥å¿—

### v1.0.0 (å½“å‰ç‰ˆæœ¬)

- âœ… åŸºç¡€è§’è‰²æ˜ å°„åŠŸèƒ½
- âœ… è‡ªåŠ¨ç¾¤ç»„åˆ›å»º
- âœ… æˆå‘˜åŒæ­¥åŠŸèƒ½
- âœ… é…ç½®åŠ¨æ€é‡è½½
- âœ… è¯¦ç»†çš„åŒæ­¥æŠ¥å‘Š

### è®¡åˆ’åŠŸèƒ½

- ğŸ”„ å®šæ—¶è‡ªåŠ¨åŒæ­¥
- ğŸ“§ åŒæ­¥ç»“æœé‚®ä»¶é€šçŸ¥
- ğŸ“Š åŒæ­¥å†å²è®°å½•
- ğŸ” é«˜çº§è¿‡æ»¤é€‰é¡¹
